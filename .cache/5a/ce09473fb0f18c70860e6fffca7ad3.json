{"id":"H99C","dependencies":[{"name":"/Users/margarita/Downloads/blinkist-web-coding-challenge-2023/package.json","includedInParent":true,"mtime":1675713577409},{"name":"./styles.css","loc":{"line":1,"column":7,"index":7},"parent":"/Users/margarita/Downloads/blinkist-web-coding-challenge-2023/src/index.js","resolved":"/Users/margarita/Downloads/blinkist-web-coding-challenge-2023/src/styles.css"},{"name":"uuid","loc":{"line":2,"column":29,"index":52},"parent":"/Users/margarita/Downloads/blinkist-web-coding-challenge-2023/src/index.js","resolved":"/Users/margarita/Downloads/blinkist-web-coding-challenge-2023/node_modules/uuid/dist/esm-browser/index.js"},{"name":"./analytics-api.js","loc":{"line":4,"column":42,"index":103},"parent":"/Users/margarita/Downloads/blinkist-web-coding-challenge-2023/src/index.js","resolved":"/Users/margarita/Downloads/blinkist-web-coding-challenge-2023/src/analytics-api.js"},{"name":"./cookie","loc":{"line":5,"column":37,"index":162},"parent":"/Users/margarita/Downloads/blinkist-web-coding-challenge-2023/src/index.js","resolved":"/Users/margarita/Downloads/blinkist-web-coding-challenge-2023/src/cookie.js"}],"generated":{"js":"\"use strict\";require(\"./styles.css\");var e=require(\"uuid\"),t=require(\"./analytics-api.js\"),i=require(\"./cookie\");if(!(0,i.getCookie)(\"sessionId\")){(0,i.setCookie)(\"sessionId\",(0,e.v4)());var o=Math.random()<.5;(0,i.setCookie)(\"abTestVersion\",o?\"test\":\"control\")}var s=!1,n=(0,i.getCookie)(\"abTestVersion\");function r(){var e=document.getElementById(\"control\"),o=document.getElementById(\"test\"),n=document.getElementById(\"button\");s?o.classList.add(\"show\"):e.classList.add(\"show\"),n.addEventListener(\"click\",function(e){e.preventDefault();var o=(0,i.getCookie)(\"sessionId\"),s=(0,i.getCookie)(\"abTestVersion\"),n=window.location.href;(0,t.trackEvent)(JSON.stringify({uuid:o,variant:s,eventName:\"sign up\",url:n}))})}\"test\"===n&&(s=!0),window.addEventListener(\"load\",function(){r();var e=(0,i.getCookie)(\"sessionId\"),o=(0,i.getCookie)(\"abTestVersion\"),s=window.location.href;(0,t.trackPageview)(JSON.stringify({uuid:e,variant:o,url:s}))});"},"sourceMaps":{"js":{"mappings":[{"source":"src/index.js","original":{"line":81,"column":0},"generated":{"line":1,"column":0}},{"source":"src/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":13}},{"source":"src/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":21}},{"source":"src/index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":37}},{"source":"src/index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":41}},{"source":"src/index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":43}},{"source":"src/index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":51}},{"source":"src/index.js","original":{"line":4,"column":0},"generated":{"line":1,"column":59}},{"source":"src/index.js","original":{"line":4,"column":0},"generated":{"line":1,"column":61}},{"source":"src/index.js","original":{"line":4,"column":0},"generated":{"line":1,"column":69}},{"source":"src/index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":91}},{"source":"src/index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":93}},{"source":"src/index.js","original":{"line":5,"column":0},"generated":{"line":1,"column":101}},{"source":"src/index.js","original":{"line":16,"column":0},"generated":{"line":1,"column":113}},{"source":"src/index.js","original":{"line":16,"column":5},"generated":{"line":1,"column":118}},{"source":"src/index.js","name":"getCookie","original":{"line":16,"column":5},"generated":{"line":1,"column":120}},{"source":"src/index.js","original":{"line":16,"column":14},"generated":{"line":1,"column":122}},{"source":"src/index.js","original":{"line":16,"column":15},"generated":{"line":1,"column":133}},{"source":"src/index.js","original":{"line":17,"column":0},"generated":{"line":1,"column":146}},{"source":"src/index.js","original":{"line":18,"column":2},"generated":{"line":1,"column":148}},{"source":"src/index.js","name":"setCookie","original":{"line":18,"column":2},"generated":{"line":1,"column":150}},{"source":"src/index.js","original":{"line":18,"column":11},"generated":{"line":1,"column":152}},{"source":"src/index.js","original":{"line":18,"column":12},"generated":{"line":1,"column":163}},{"source":"src/index.js","original":{"line":18,"column":25},"generated":{"line":1,"column":176}},{"source":"src/index.js","name":"uuidv4","original":{"line":18,"column":25},"generated":{"line":1,"column":178}},{"source":"src/index.js","original":{"line":18,"column":31},"generated":{"line":1,"column":180}},{"source":"src/index.js","original":{"line":19,"column":2},"generated":{"line":1,"column":187}},{"source":"src/index.js","name":"testVariation","original":{"line":19,"column":8},"generated":{"line":1,"column":191}},{"source":"src/index.js","name":"Math","original":{"line":19,"column":24},"generated":{"line":1,"column":193}},{"source":"src/index.js","name":"random","original":{"line":19,"column":29},"generated":{"line":1,"column":198}},{"source":"src/index.js","original":{"line":19,"column":40},"generated":{"line":1,"column":207}},{"source":"src/index.js","original":{"line":20,"column":2},"generated":{"line":1,"column":211}},{"source":"src/index.js","name":"setCookie","original":{"line":20,"column":2},"generated":{"line":1,"column":213}},{"source":"src/index.js","original":{"line":20,"column":11},"generated":{"line":1,"column":215}},{"source":"src/index.js","original":{"line":20,"column":12},"generated":{"line":1,"column":226}},{"source":"src/index.js","name":"testVariation","original":{"line":20,"column":29},"generated":{"line":1,"column":242}},{"source":"src/index.js","original":{"line":20,"column":45},"generated":{"line":1,"column":244}},{"source":"src/index.js","original":{"line":20,"column":54},"generated":{"line":1,"column":251}},{"source":"src/index.js","original":{"line":23,"column":0},"generated":{"line":1,"column":262}},{"source":"src/index.js","name":"showVariation","original":{"line":23,"column":4},"generated":{"line":1,"column":266}},{"source":"src/index.js","original":{"line":23,"column":20},"generated":{"line":1,"column":269}},{"source":"src/index.js","name":"cookieValue","original":{"line":24,"column":6},"generated":{"line":1,"column":271}},{"source":"src/index.js","original":{"line":24,"column":20},"generated":{"line":1,"column":274}},{"source":"src/index.js","name":"getCookie","original":{"line":24,"column":20},"generated":{"line":1,"column":276}},{"source":"src/index.js","original":{"line":24,"column":29},"generated":{"line":1,"column":278}},{"source":"src/index.js","original":{"line":24,"column":30},"generated":{"line":1,"column":289}},{"source":"src/index.js","original":{"line":53,"column":0},"generated":{"line":1,"column":306}},{"source":"src/index.js","name":"setup","original":{"line":53,"column":9},"generated":{"line":1,"column":315}},{"source":"src/index.js","original":{"line":54,"column":2},"generated":{"line":1,"column":319}},{"source":"src/index.js","name":"control","original":{"line":54,"column":8},"generated":{"line":1,"column":323}},{"source":"src/index.js","name":"document","original":{"line":54,"column":18},"generated":{"line":1,"column":325}},{"source":"src/index.js","name":"getElementById","original":{"line":54,"column":27},"generated":{"line":1,"column":334}},{"source":"src/index.js","original":{"line":54,"column":42},"generated":{"line":1,"column":349}},{"source":"src/index.js","name":"test","original":{"line":55,"column":8},"generated":{"line":1,"column":360}},{"source":"src/index.js","name":"document","original":{"line":55,"column":15},"generated":{"line":1,"column":362}},{"source":"src/index.js","name":"getElementById","original":{"line":55,"column":24},"generated":{"line":1,"column":371}},{"source":"src/index.js","original":{"line":55,"column":39},"generated":{"line":1,"column":386}},{"source":"src/index.js","name":"link","original":{"line":56,"column":8},"generated":{"line":1,"column":394}},{"source":"src/index.js","name":"document","original":{"line":56,"column":15},"generated":{"line":1,"column":396}},{"source":"src/index.js","name":"getElementById","original":{"line":56,"column":24},"generated":{"line":1,"column":405}},{"source":"src/index.js","original":{"line":56,"column":39},"generated":{"line":1,"column":420}},{"source":"src/index.js","name":"showVariation","original":{"line":58,"column":6},"generated":{"line":1,"column":430}},{"source":"src/index.js","name":"test","original":{"line":60,"column":1},"generated":{"line":1,"column":432}},{"source":"src/index.js","name":"classList","original":{"line":60,"column":6},"generated":{"line":1,"column":434}},{"source":"src/index.js","name":"add","original":{"line":60,"column":16},"generated":{"line":1,"column":444}},{"source":"src/index.js","original":{"line":60,"column":20},"generated":{"line":1,"column":448}},{"source":"src/index.js","name":"control","original":{"line":63,"column":4},"generated":{"line":1,"column":456}},{"source":"src/index.js","name":"classList","original":{"line":63,"column":12},"generated":{"line":1,"column":458}},{"source":"src/index.js","name":"add","original":{"line":63,"column":22},"generated":{"line":1,"column":468}},{"source":"src/index.js","original":{"line":63,"column":26},"generated":{"line":1,"column":472}},{"source":"src/index.js","name":"link","original":{"line":66,"column":2},"generated":{"line":1,"column":480}},{"source":"src/index.js","name":"addEventListener","original":{"line":66,"column":7},"generated":{"line":1,"column":482}},{"source":"src/index.js","original":{"line":66,"column":24},"generated":{"line":1,"column":499}},{"source":"src/index.js","original":{"line":66,"column":33},"generated":{"line":1,"column":507}},{"source":"src/index.js","name":"event","original":{"line":66,"column":43},"generated":{"line":1,"column":516}},{"source":"src/index.js","name":"event","original":{"line":67,"column":4},"generated":{"line":1,"column":519}},{"source":"src/index.js","name":"preventDefault","original":{"line":67,"column":10},"generated":{"line":1,"column":521}},{"source":"src/index.js","original":{"line":69,"column":4},"generated":{"line":1,"column":538}},{"source":"src/index.js","name":"uuid","original":{"line":69,"column":10},"generated":{"line":1,"column":542}},{"source":"src/index.js","original":{"line":69,"column":17},"generated":{"line":1,"column":545}},{"source":"src/index.js","name":"getCookie","original":{"line":69,"column":17},"generated":{"line":1,"column":547}},{"source":"src/index.js","original":{"line":69,"column":26},"generated":{"line":1,"column":549}},{"source":"src/index.js","original":{"line":69,"column":27},"generated":{"line":1,"column":560}},{"source":"src/index.js","name":"variant","original":{"line":70,"column":10},"generated":{"line":1,"column":573}},{"source":"src/index.js","original":{"line":70,"column":20},"generated":{"line":1,"column":576}},{"source":"src/index.js","name":"getCookie","original":{"line":70,"column":20},"generated":{"line":1,"column":578}},{"source":"src/index.js","original":{"line":70,"column":29},"generated":{"line":1,"column":580}},{"source":"src/index.js","original":{"line":70,"column":30},"generated":{"line":1,"column":591}},{"source":"src/index.js","name":"url","original":{"line":71,"column":10},"generated":{"line":1,"column":608}},{"source":"src/index.js","name":"window","original":{"line":71,"column":16},"generated":{"line":1,"column":610}},{"source":"src/index.js","name":"location","original":{"line":71,"column":23},"generated":{"line":1,"column":617}},{"source":"src/index.js","name":"href","original":{"line":71,"column":32},"generated":{"line":1,"column":626}},{"source":"src/index.js","original":{"line":74,"column":4},"generated":{"line":1,"column":632}},{"source":"src/index.js","name":"trackEvent","original":{"line":74,"column":4},"generated":{"line":1,"column":634}},{"source":"src/index.js","original":{"line":74,"column":14},"generated":{"line":1,"column":636}},{"source":"src/index.js","name":"JSON","original":{"line":74,"column":15},"generated":{"line":1,"column":648}},{"source":"src/index.js","name":"stringify","original":{"line":74,"column":20},"generated":{"line":1,"column":653}},{"source":"src/index.js","original":{"line":74,"column":30},"generated":{"line":1,"column":663}},{"source":"src/index.js","name":"uuid","original":{"line":75,"column":6},"generated":{"line":1,"column":664}},{"source":"src/index.js","name":"uuid","original":{"line":75,"column":6},"generated":{"line":1,"column":669}},{"source":"src/index.js","name":"variant","original":{"line":76,"column":6},"generated":{"line":1,"column":671}},{"source":"src/index.js","name":"variant","original":{"line":76,"column":6},"generated":{"line":1,"column":679}},{"source":"src/index.js","name":"eventName","original":{"line":77,"column":6},"generated":{"line":1,"column":681}},{"source":"src/index.js","original":{"line":72,"column":22},"generated":{"line":1,"column":691}},{"source":"src/index.js","name":"url","original":{"line":78,"column":6},"generated":{"line":1,"column":701}},{"source":"src/index.js","name":"url","original":{"line":78,"column":6},"generated":{"line":1,"column":705}},{"source":"src/index.js","original":{"line":25,"column":20},"generated":{"line":1,"column":712}},{"source":"src/index.js","name":"cookieValue","original":{"line":25,"column":4},"generated":{"line":1,"column":721}},{"source":"src/index.js","name":"showVariation","original":{"line":27,"column":2},"generated":{"line":1,"column":725}},{"source":"src/index.js","original":{"line":27,"column":18},"generated":{"line":1,"column":728}},{"source":"src/index.js","name":"window","original":{"line":41,"column":0},"generated":{"line":1,"column":731}},{"source":"src/index.js","name":"addEventListener","original":{"line":41,"column":7},"generated":{"line":1,"column":738}},{"source":"src/index.js","original":{"line":41,"column":24},"generated":{"line":1,"column":755}},{"source":"src/index.js","original":{"line":41,"column":32},"generated":{"line":1,"column":762}},{"source":"src/index.js","name":"setup","original":{"line":43,"column":2},"generated":{"line":1,"column":773}},{"source":"src/index.js","original":{"line":45,"column":2},"generated":{"line":1,"column":777}},{"source":"src/index.js","name":"uuid","original":{"line":45,"column":8},"generated":{"line":1,"column":781}},{"source":"src/index.js","original":{"line":45,"column":15},"generated":{"line":1,"column":784}},{"source":"src/index.js","name":"getCookie","original":{"line":45,"column":15},"generated":{"line":1,"column":786}},{"source":"src/index.js","original":{"line":45,"column":24},"generated":{"line":1,"column":788}},{"source":"src/index.js","original":{"line":45,"column":25},"generated":{"line":1,"column":799}},{"source":"src/index.js","name":"variant","original":{"line":46,"column":8},"generated":{"line":1,"column":812}},{"source":"src/index.js","original":{"line":46,"column":18},"generated":{"line":1,"column":815}},{"source":"src/index.js","name":"getCookie","original":{"line":46,"column":18},"generated":{"line":1,"column":817}},{"source":"src/index.js","original":{"line":46,"column":27},"generated":{"line":1,"column":819}},{"source":"src/index.js","original":{"line":46,"column":28},"generated":{"line":1,"column":830}},{"source":"src/index.js","name":"url","original":{"line":47,"column":8},"generated":{"line":1,"column":847}},{"source":"src/index.js","name":"window","original":{"line":47,"column":14},"generated":{"line":1,"column":849}},{"source":"src/index.js","name":"location","original":{"line":47,"column":21},"generated":{"line":1,"column":856}},{"source":"src/index.js","name":"href","original":{"line":47,"column":30},"generated":{"line":1,"column":865}},{"source":"src/index.js","original":{"line":48,"column":2},"generated":{"line":1,"column":871}},{"source":"src/index.js","name":"trackPageview","original":{"line":48,"column":2},"generated":{"line":1,"column":873}},{"source":"src/index.js","original":{"line":48,"column":15},"generated":{"line":1,"column":875}},{"source":"src/index.js","name":"JSON","original":{"line":49,"column":4},"generated":{"line":1,"column":890}},{"source":"src/index.js","name":"stringify","original":{"line":49,"column":9},"generated":{"line":1,"column":895}},{"source":"src/index.js","original":{"line":49,"column":19},"generated":{"line":1,"column":905}},{"source":"src/index.js","name":"uuid","original":{"line":49,"column":21},"generated":{"line":1,"column":906}},{"source":"src/index.js","name":"uuid","original":{"line":49,"column":21},"generated":{"line":1,"column":911}},{"source":"src/index.js","name":"variant","original":{"line":49,"column":27},"generated":{"line":1,"column":913}},{"source":"src/index.js","name":"variant","original":{"line":49,"column":27},"generated":{"line":1,"column":921}},{"source":"src/index.js","name":"url","original":{"line":49,"column":36},"generated":{"line":1,"column":923}},{"source":"src/index.js","name":"url","original":{"line":49,"column":36},"generated":{"line":1,"column":927}}],"sources":{"src/index.js":"import \"./styles.css\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport { trackPageview, trackEvent } from \"./analytics-api.js\";\nimport { setCookie, getCookie } from \"./cookie\";\n\n\n\n/**\n *  So basically to determine a winning variation\n * the trackPageview function and trackEvent function\n * should get the sessionId and name of the variant shown \n * to the user as it would be enough to see the conversion. \n */\n\nif (!getCookie('sessionId'))\n{\n  setCookie('sessionId', uuidv4());\n  const testVariation = Math.random() < 0.5\n  setCookie('abTestVersion', testVariation ? 'test' : 'control')\n}\n\nlet showVariation = false\nconst cookieValue = getCookie('abTestVersion')\nif (cookieValue === 'test')\n{\n  showVariation = true\n}\n\n/** \n * Given the current structure, only the load\n * event will work.\n * \n * In a more complex SPA internal navigation \n * will not trigger load. In that case we'll\n * use complex router that uses the History API\n * and then the `popstate` event would be used.\n * \n */\n\nwindow.addEventListener('load', () =>\n{\n  setup()\n  \n  const uuid = getCookie('sessionId')\n  const variant = getCookie('abTestVersion')\n  const url = window.location.href\n  trackPageview(\n    JSON.stringify({ uuid, variant, url })\n  )\n})\n\nfunction setup() {\n  const control = document.getElementById('control')\n  const test = document.getElementById('test')\n  const link = document.getElementById('button')\n\n  if (showVariation)\n  {\n test.classList.add('show')\n  } else\n  {\n    control.classList.add('show')\n  }\n\n  link.addEventListener('click', function (event) {\n    event.preventDefault();\n\n    const uuid = getCookie('sessionId')\n    const variant = getCookie('abTestVersion')\n    const url = window.location.href\n    const eventName = 'sign up'\n\n    trackEvent(JSON.stringify({\n      uuid, \n      variant, \n      eventName, \n      url\n    }))\n  });\n}\n"},"lineCount":null}},"error":null,"hash":"b0b4afec724279772746a24a8c346bde","cacheData":{"env":{}}}